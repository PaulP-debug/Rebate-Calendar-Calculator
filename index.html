<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rebate Calendar Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; padding: 20px; }

/* Compact input boxes */
input[type="text"], select {
  width: 260px;
  padding: 6px;
  margin-bottom: 8px;
  font-size: 14px;
}
textarea {
  width: 280px;
  height: 130px;
  padding: 6px;
  margin-bottom: 8px;
}

button {
  padding: 8px 14px;
  font-size: 14px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  margin-right: 5px;
}

/* Flex area (TOP ONLY) */
.flex-container {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.inputs {
  width: 320px;
}

.timezones {
  width: 260px;
}

/* Tables */
table {
  border-collapse: collapse;
  width: 100%;
  margin-top: 10px;
}
th, td {
  border: 1px solid #ccc;
  padding: 6px;
  font-size: 13px;
}
.valid-range { background-color: #c6efce; }

/* Timezone colors */
.pst { background:#cce5ff; }
.mst { background:#d4edda; }
.cst { background:#fff3cd; }
.est { background:#ffe5b4; }

/* Result section FULL WIDTH */
#resultSection {
  margin-top: 25px;
}

#loginContainer { text-align:center; margin-top:100px; }
</style>
</head>

<body>

<div id="loginContainer">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
  <p id="loginMessage" style="color:red;"></p>
</div>

<div id="appContainer" style="display:none;">

<h2>Rebate Calendar Calculator</h2>

<!-- ðŸ”¹ TOP FLEX AREA ONLY -->
<div class="flex-container">

  <!-- LEFT: INPUTS -->
  <div class="inputs">
    <label>Rebate Date</label>
    <input id="rebateDate" placeholder="YYYY-MM-DD HH:MM:SS">

    <label>Tier</label>
    <select id="tier">
      <option value="2">Tier 2 (7 days)</option>
      <option value="3">Tier 3 (9 days)</option>
    </select>

    <label>Purchase Dates</label>
    <textarea id="purchaseDates"></textarea>

    <button onclick="calculateLegends()" style="background:#8A2BE2;color:white;">LEGENDS</button>
    <button onclick="calculateAcorn()" style="background:#FFD700;">ACORN</button>
    <button onclick="logout()" style="background:#f44336;color:white;">Logout</button>
  </div>

  <!-- RIGHT: TIMEZONE -->
  <div class="timezones">
    <h3>Timezone Converter (UTC)</h3>
    <label>Backend Time</label>
    <input id="timezoneInput" placeholder="YYYY-MM-DD HH:MM:SS" oninput="updateTimezones()">
    <div id="timezoneResult"></div>
  </div>

</div>

<!-- ðŸ”¹ FULL WIDTH RESULT SECTION -->
<div id="resultSection">
  <h3 id="modeLabel"></h3>
  <div id="result"></div>
</div>

</div>

<script>
const USERNAME="LEGENDS_ADMIN", PASSWORD="AcornLegends2025";

/* LOGIN */
function login(){
  if(username.value===USERNAME && password.value===PASSWORD){
    loginContainer.style.display="none";
    appContainer.style.display="block";
    localStorage.loggedIn="true";
  } else loginMessage.textContent="Invalid credentials";
}
if(localStorage.loggedIn==="true"){
  loginContainer.style.display="none";
  appContainer.style.display="block";
}
function logout(){ localStorage.clear(); location.reload(); }

/* UTIL */
function parseLocalDate(s){
  const d=new Date(s.replace(" ","T"));
  return isNaN(d)?null:d;
}
function fmt(d){
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')} ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}:${String(d.getSeconds()).padStart(2,'0')}`;
}

/* TIMEZONES */
function updateTimezones(){
  const dt=parseLocalDate(timezoneInput.value);
  if(!dt){ timezoneResult.innerHTML=""; return; }

  timezoneResult.innerHTML=`
  <table>
    <tr><th>Timezone</th><th>Date</th></tr>
    <tr class="pst"><td>PST (Server Time)</td><td>${fmt(new Date(dt-8*3600000)).slice(0,16)}</td></tr>
    <tr class="mst"><td>MST</td><td>${fmt(new Date(dt-7*3600000)).slice(0,16)}</td></tr>
    <tr class="cst"><td>CST</td><td>${fmt(new Date(dt-6*3600000)).slice(0,16)}</td></tr>
    <tr class="est"><td>EST</td><td>${fmt(new Date(dt-5*3600000)).slice(0,16)}</td></tr>
  </table>`;
}
</script>

<p style="text-align:right;opacity:.7;margin-top:40px;">â€” by: Paul P</p>

</body>
</html>
